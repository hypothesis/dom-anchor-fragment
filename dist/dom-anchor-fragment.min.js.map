{"version":3,"sources":["dom-anchor-fragment.js"],"names":["global","factory","define","amd","exports","module","mod","domAnchorFragment","this","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","FragmentAnchor","root","id","undefined","Error","value","el","querySelector","range","document","createRange","selectNodeContents","conformsTo","SVGElement","type","commonAncestorContainer","compareDocumentPosition","Node","DOCUMENT_POSITION_CONTAINED_BY","parentElement","selector","arguments"],"mappings":"CAAA,SAAWA,EAAQC,GACjB,GAAsB,kBAAXC,SAAyBA,OAAOC,IACzCD,QAAQ,UAAW,UAAWD,OACzB,IAAuB,mBAAZG,UAA6C,mBAAXC,QAClDJ,EAAQG,QAASC,YACZ,CACL,GAAIC,IACFF,WAEFH,GAAQK,EAAIF,QAASE,GACrBN,EAAOO,kBAAoBD,EAAIF,UAEhCI,KAAM,SAAUJ,EAASC,GAC1B,YAIA,SAASI,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAFhH,GAAIC,GAAe,WAAe,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIC,GAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CAAE,GAAIE,GAAaH,EAAMC,EAAIE,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMC,OAAOC,eAAeT,EAAQI,EAAWM,IAAKN,IAAiB,MAAO,UAAUR,EAAae,EAAYC,GAAiJ,MAA9HD,IAAYZ,EAAiBH,EAAYiB,UAAWF,GAAiBC,GAAab,EAAiBH,EAAagB,GAAqBhB,MAf9gBkB,EAAc,WACtB,QADQA,GACPC,EAAMC,GAChB,GAmBEtB,EAAgBD,KArBDqB,GAEJG,SAATF,EACF,KAAM,IAAIG,OAAM,oCAElB,IAAWD,SAAPD,EACF,KAAM,IAAIE,OAAM,kCAGlBzB,MAAKsB,KAAOA,EACZtB,KAAKuB,GAAKA,EAsFV,MA9DAlB,GAlCiBgB,IAmCfJ,IAAK,UACLS,MAEG,WACL,GAAIC,GAAK3B,KAAKsB,KAAKM,cAAc,IAAM5B,KAAKuB,GAC5C,IAAU,MAANI,EACF,KAAM,IAAIF,OAAM,6BAA+BzB,KAAKuB,GAAK,IAG3D,IAAIM,GAAQrC,OAAOsC,SAASC,aAG5B,OAFAF,GAAMG,mBAAmBL,GAElBE,KACLZ,IAAK,aACLS,MACM,WACR,GAAIC,GAAK3B,KAAKsB,KAAKM,cAAc,IAAM5B,KAAKuB,GAC5C,IAAU,MAANI,EACF,KAAM,IAAIF,OAAM,6BAA+BzB,KAAKuB,GAAK,IAG3D,IAAIU,GAAa,qCAKjB,OAJIN,aAAcO,cAChBD,EAAa,8BAIbE,KAAM,mBACNT,MAAO1B,KAAKuB,GACZU,WAAYA,QAGZhB,IAAK,YACLS,MAvDY,SAACJ,EAAMO,GACrB,GAAaL,SAATF,EACF,KAAM,IAAIG,OAAM,oCAElB,IAAcD,SAAVK,EACF,KAAM,IAAIJ,OAAM,qCAIlB,KADA,GAAIE,GAAKE,EAAMO,wBACF,MAANT,IAAeA,EAAGJ,IAAI,CAC3B,KAAID,EAAKe,wBAAwBV,GAC7BW,KAAKC,gCAGP,KAAM,IAAId,OAAM,+BAFhBE,GAAKA,EAAGa,cAMZ,MAAO,IAAInB,GAAeC,EAAMK,EAAGJ,OAyDjCN,IAAK,eACLS,MAvDe,SAACJ,GAwDd,GAxDoBmB,GAAQC,UAAAhC,QAAA,GAAAc,SAAAkB,UAAA,MAAKA,UAAA,EACrC,OAAO,IAAIrB,GAAeC,EAAMmB,EAASf,WAnCxBL,IAmGnBxB,GAAOD,QAnGYyB","file":"dom-anchor-fragment.min.js","sourcesContent":["export default class FragmentAnchor {\n  constructor(root, id) {\n    if (root === undefined) {\n      throw new Error('missing required parameter \"root\"');\n    }\n    if (id === undefined) {\n      throw new Error('missing required parameter \"id\"');\n    }\n\n    this.root = root;\n    this.id = id;\n  }\n\n  static fromRange(root, range) {\n    if (root === undefined) {\n      throw new Error('missing required parameter \"root\"');\n    }\n    if (range === undefined) {\n      throw new Error('missing required parameter \"range\"');\n    }\n\n    let el = range.commonAncestorContainer;\n    while (el != null && !el.id) {\n      if (root.compareDocumentPosition(el) &\n          Node.DOCUMENT_POSITION_CONTAINED_BY) {\n        el = el.parentElement;\n      } else {\n        throw new Error('no fragment identifier found');\n      }\n    }\n\n    return new FragmentAnchor(root, el.id);\n  }\n\n  static fromSelector(root, selector = {}) {\n    return new FragmentAnchor(root, selector.value);\n  }\n\n  toRange() {\n    let el = this.root.querySelector('#' + this.id);\n    if (el == null) {\n      throw new Error('no element found with id \"' + this.id + '\"');\n    }\n\n    let range = global.document.createRange();\n    range.selectNodeContents(el);\n\n    return range;\n  }\n\n  toSelector() {\n    let el = this.root.querySelector('#' + this.id);\n    if (el == null) {\n      throw new Error('no element found with id \"' + this.id + '\"');\n    }\n\n    let conformsTo = 'https://tools.ietf.org/html/rfc3236';\n    if (el instanceof SVGElement) {\n      conformsTo = 'http://www.w3.org/TR/SVG/';\n    }\n\n    return {\n      type: 'FragmentSelector',\n      value: this.id,\n      conformsTo: conformsTo,\n    };\n  }\n}\n"],"sourceRoot":"./"}